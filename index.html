<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚¤ãƒ©ã‚¹ãƒˆç”³ã—è¾¼ã¿</title>
<meta name="robots" content="noai, noimageai, noindex, nofollow">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
/* --- ã‚¹ã‚¿ã‚¤ãƒ«ã¯å¤‰æ›´ãªã— --- */
body {
Â  Â  background-color: #f7f9fc;
Â  Â  display: flex;
Â  Â  justify-content: center;
Â  Â  padding: 40px;
Â  Â  flex-direction: column;
Â  Â  align-items: center;
}
.container {
Â  Â  background: white;
Â  Â  padding: 0;
Â  Â  border-radius: 12px;
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
Â  Â  width: 100%;
Â  Â  max-width: 700px;
Â  Â  box-sizing: border-box;
}
.content-wrapper {
Â  Â  padding: 15px 40px;
}
.header-image {
Â  Â  display: block;
Â  Â  width: 100%;
Â  Â  max-height: 250px;
Â  Â  object-fit: cover;
Â  Â  border-top-left-radius: 12px;
Â  Â  border-top-right-radius: 12px;
}
.disclaimer-container {
Â  Â  padding: 15px 40px;
Â  Â  border-top: 2px solid #ff91d7;
Â  Â  border-bottom: 2px solid #ff91d7;
Â  Â  text-align: center;
}
.disclaimer-container p {
Â  Â  margin: 0;
Â  Â  font-size: 14px;
Â  Â  color: #000000;
Â  Â  line-height: 1.6;
}
h2, h3 {
Â  Â  color: #333;
}
h3 {
Â  Â  font-size: 1.15em;
Â  Â  font-weight: 600;
Â  Â  margin-top: 40px;
Â  Â  padding-bottom: 8px;
Â  Â  display: flex;
Â  Â  align-items: center;
Â  Â  gap: 8px;
Â  Â  border-bottom: 2px solid #ff91d7;
}
.section-description {
Â  Â  font-size: 14px;
Â  Â  color: #666;
Â  Â  margin: 4px 0 12px;
}
.required-note {
Â  Â  color: #FF0000;
Â  Â  font-size: 12px;
}
label {
Â  Â  display: block;
Â  Â  margin: 6px 0;
Â  Â  color: #222;
}
input[type="text"],
input[type="email"],
textarea {
Â  Â  font-size: 16px;
Â  Â  width: 100%;
Â  Â  padding: 10px;
Â  Â  margin-top: 6px;
Â  Â  margin-bottom: 20px;
Â  Â  border: 1px solid #ccc;
Â  Â  border-radius: 6px;
Â  Â  box-sizing: border-box;
}
input[type="file"] {
Â  Â  margin-bottom: 10px;
}
.input-error {
Â  Â  border-color: red !important;
Â  Â  outline: 1px solid red;
Â  Â  background-color: #fff8f8;
}
label.highlight-error {
Â  Â  color: red !important;
}
.error-message {
Â  Â  color: red;
Â  Â  font-size: 0.9em;
Â  Â  margin: -10px 0 15px;
Â  Â  line-height: 1.4;
Â  Â  background-color: #fff0f0;
Â  Â  padding: 6px 8px;
Â  Â  border: 1px solid #ffcccc;
Â  Â  border-radius: 4px;
}
.total {
Â  Â  font-size: 1.3em;
Â  Â  font-weight: bold;
Â  Â  color: #1e7c27;
Â  Â  text-align: center;
Â  Â  margin-top: 24px;
}
.estimate-note {
Â  Â  text-align: center;
Â  Â  color: #555;
Â  Â  font-size: 14px;
Â  Â  margin-top: 10px;
Â  Â  line-height: 1.5;
}
.preview img {
Â  Â  max-width: 100%;
Â  Â  max-height: 200px;
Â  Â  margin-top: 10px;
Â  Â  border-radius: 6px;
}
.preview-note {
Â  Â  color: #d66;
Â  Â  font-size: 0.9em;
Â  Â  text-align: center;
Â  Â  width: 100%;
Â  Â  margin-top: 10px;
}
#optionPreview {
Â  Â  display: flex;
Â  Â  flex-wrap: wrap;
Â  Â  gap: 10px;
Â  Â  margin-top: 10px;
}
.optionImageWrapper {
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  align-items: center;
}
.optionImageWrapper .preview-note {
Â  Â  font-size: 0.8em;
Â  Â  margin-top: 5px;
}
#filePreviewContainer {
Â  Â  margin-bottom: 20px;
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  gap: 8px;
}
.file-preview-item {
Â  Â  display: flex;
Â  Â  justify-content: space-between;
Â  Â  align-items: center;
Â  Â  padding: 8px 12px;
Â  Â  background-color: #f4f4f9;
Â  Â  border: 1px solid #e0e0e0;
Â  Â  border-radius: 6px;
Â  Â  font-size: 0.9em;
}
.file-preview-item span {
Â  Â  white-space: nowrap;
Â  Â  overflow: hidden;
Â  Â  text-overflow: ellipsis;
Â  Â  margin-right: 10px;
}
.file-preview-item button {
Â  Â  background-color: #ff4d4d;
Â  Â  color: white;
Â  Â  border: none;
Â  Â  border-radius: 4px;
Â  Â  padding: 4px 8px;
Â  Â  cursor: pointer;
Â  Â  font-size: 0.8em;
Â  Â  line-height: 1;
}
.file-preview-item button:hover {
Â  Â  background-color: #cc0000;
}
button[type="submit"] {
Â  Â  background-color: #446dff;
Â  Â  color: white;
Â  Â  padding: 12px 20px;
Â  Â  border: none;
Â  Â  border-radius: 6px;
Â  Â  font-size: 1em;
Â  Â  width: 10em;
Â  Â  cursor: pointer;
Â  Â  margin-top: 30px;
Â  Â  transition: all 0.3s ease;
}
button[type="submit"][disabled] {
Â  Â  background-color: #888;
Â  Â  cursor: not-allowed;
}
button[type="submit"]:hover:not([disabled]) {
Â  Â  background-color: #ff69b4;
Â  Â  transform: translateY(-2px);
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
#previewPanel {
Â  Â  position: fixed;
Â  Â  bottom: 20px;
Â  Â  right: 20px;
Â  Â  width: 270px;
Â  Â  background: #ffffff;
Â  Â  border: 1px solid #e0e0e0;
Â  Â  border-top: 4px solid #ff8cc6;
Â  Â  border-radius: 8px;
Â  Â  box-shadow: 0 5px 18px rgba(0, 0, 0, 0.1);
Â  Â  padding: 18px 22px;
Â  Â  z-index: 1000;
Â  Â  font-size: 13.5px;
Â  Â  box-sizing: border-box;
}
#previewPanel h4 {
Â  Â  font-size: 1.15em;
Â  Â  color: #2c2c2c;
Â  Â  margin: 0 0 16px;
Â  Â  padding-bottom: 12px;
Â  Â  border-bottom: 1px solid #f0f0f0;
Â  Â  display: flex;
Â  Â  align-items: center;
}
#previewPanel h4::before {
Â  Â  content: 'ğŸ“‹';
Â  Â  margin-right: 8px;
Â  Â  font-size: 1.1em;
Â  Â  color: #ff8cc6;
}
#previewPanel p {
Â  Â  margin-bottom: 10px;
Â  Â  padding-bottom: 10px;
Â  Â  border-bottom: 1px solid #f5f5f5;
Â  Â  line-height: 1.4;
}
#previewPanel p:last-child {
Â  Â  border-bottom: none;
Â  Â  margin: 12px 0 0;
Â  Â  padding: 12px 0 0;
Â  Â  border-top: 1px solid #e9e9e9;
}
#previewPanel p strong {
Â  Â  display: block;
Â  Â  color: #444;
Â  Â  font-weight: 600;
Â  Â  margin-bottom: 6px;
Â  Â  font-size: 0.9em;
}
#previewPanel p span:not(.preview-total-highlight) {
Â  Â  display: block;
Â  Â  color: #333;
Â  Â  padding-left: 8px;
Â  Â  font-size: 0.95em;
Â  Â  word-break: break-word;
Â  Â  line-height: 1.55;
}
#previewPanel .preview-total-highlight {
Â  Â  font-size: 1.65em;
Â  Â  color: #1a650e;
Â  Â  font-weight: bold;
Â  Â  background-color: #e6f4e3;
Â  Â  padding: 7px 14px;
Â  Â  border-radius: 6px;
Â  Â  display: inline-block;
Â  Â  text-align: left;
Â  Â  border: 1px solid #c8e6c1;
Â  Â  margin-top: 4px;
}
.popup-overlay {
Â  Â  position: fixed;
Â  Â  top: 0; left: 0;
Â  Â  width: 100%; height: 100%;
Â  Â  background: rgba(0,0,0,0.8);
Â  Â  display: none;
Â  Â  align-items: center;
Â  Â  justify-content: center;
Â  Â  z-index: 9999;
}
.popup-overlay img {
Â  Â  max-width: 90%;
Â  Â  max-height: 90%;
Â  Â  border-radius: 10px;
Â  Â  box-shadow: 0 0 10px rgba(0,0,0,0.5);
}
.complete {
Â  Â  text-align: center;
Â  Â  padding: 40px;
Â  Â  background-color: #fff;
Â  Â  border-radius: 12px;
Â  Â  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
Â  Â  max-width: 500px;
Â  Â  margin: 20px auto;
}
.is-hidden {
Â  Â  display: none !important;
}
#closeTabButton {
Â  Â  background-color: #446dff;
Â  Â  color: white;
Â  Â  padding: 12px 20px;
Â  Â  border: none;
Â  Â  border-radius: 6px;
Â  Â  font-size: 1em;
Â  Â  width: 10em;
Â  Â  cursor: pointer;
Â  Â  margin-top: 20px;
Â  Â  transition: all 0.3s ease;
}
#loadingOverlay {
Â  Â  position: fixed;
Â  Â  top: 0;
Â  Â  left: 0;
Â  Â  width: 100%;
Â  Â  height: 100%;
Â  Â  background: rgba(255, 255, 255, 0.8);
Â  Â  display: flex;
Â  Â  flex-direction: column;
Â  Â  justify-content: center;
Â  Â  align-items: center;
Â  Â  z-index: 10000;
Â  Â  opacity: 0;
Â  Â  visibility: hidden;
Â  Â  transition: opacity 0.3s, visibility 0.3s;
}
.spinner {
Â  Â  border: 6px solid #f3f3f3;
Â  Â  border-top: 6px solid #ff69b4;
Â  Â  border-radius: 50%;
Â  Â  width: 50px;
Â  Â  height: 50px;
Â  Â  animation: spin 1s linear infinite;
}
@keyframes spin {
Â  Â  0% { transform: rotate(0deg); }
Â  Â  100% { transform: rotate(360deg); }
}
#loadingText {
Â  Â  margin-top: 20px;
Â  Â  color: #555;
Â  Â  font-size: 1.1em;
}
@media (max-width: 980px) {
Â  Â  body { padding: 20px; }
Â  Â  .content-wrapper { padding: 15px 20px; }
Â  Â  .disclaimer-container { padding: 15px 20px; }
Â  Â  #previewPanel {
Â  Â  Â  Â  position: static;
Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  margin: 25px 0;
Â  Â  Â  Â  padding: 15px 18px;
Â  Â  Â  Â  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
Â  Â  Â  Â  border-top-width: 3px;
Â  Â  }
Â  Â  #previewPanel h4 { font-size: 1.1em; margin-bottom: 15px; padding-bottom: 10px; }
Â  Â  #previewPanel h4::before { font-size: 1em; }
Â  Â  #previewPanel p { margin-bottom: 8px; padding-bottom: 8px; line-height: 1.3; }
Â  Â  #previewPanel p strong { font-size: 0.85em; }
Â  Â  #previewPanel p span:not(.preview-total-highlight) { font-size: 0.9em; padding-left: 6px; }
Â  Â  #previewPanel .preview-total-highlight { font-size: 1.55em; padding: 6px 12px; }
}
@media (max-width: 600px) {
Â  Â  body { padding: 15px; }
Â  Â  .content-wrapper { padding: 15px; }
Â  Â  h3 { font-size: 1.1em; }
Â  Â  input[type="text"], input[type="email"], textarea { padding: 12px; }
Â  Â  #previewPanel { padding: 12px 15px; margin: 20px 0; }
Â  Â  #previewPanel h4 { font-size: 1.05em; }
Â  Â  #previewPanel .preview-total-highlight { font-size: 1.45em; }
Â  Â  #previewPanel p strong { font-size: 0.8em; }
Â  Â  #previewPanel p span:not(.preview-total-highlight) { font-size: 0.85em; padding-left: 5px; }
}
@media print {
Â  Â  img { display: none !important; }
}
</style>
</head>
<body>

<div class="container" id="formContainer">
Â  <img src="https://raw.githubusercontent.com/5442mako/image-host-/main/575758226550424048.webp" alt="ãƒ˜ãƒƒãƒ€ãƒ¼ç”»åƒ" class="header-image" loading="lazy" decoding="async">
Â  <div class="disclaimer-container">
Â  Â  <p>
Â  Â  Â  â€»æœ¬ãƒšãƒ¼ã‚¸ã«æ²è¼‰ã•ã‚ŒãŸç”»åƒã®ç„¡æ–­è»¢è¼‰ãƒ»ç„¡æ–­ä½¿ç”¨ã‚’ç¦æ­¢ã€‚<br>
Â  Â  Â  â€»ä¸æ­£åˆ©ç”¨ãŒç™ºè¦šã—ãŸå ´åˆã€æå®³è«‹æ±‚ã®å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚
Â  Â  </p>
Â  </div>
Â  <div class="content-wrapper">
Â  Â  <form id="estimateForm">
Â  Â  Â  <h3 id="illustrationTypeSectionH3">ã€ã”å¸Œæœ›ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã€‘<span class="required-note">â€»å¿…é ˆã€‚</span></h3>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="é¡”ã‚¢ãƒƒãƒ—ï¼ˆ5000å††ï¼‰" data-imgs="https://raw.githubusercontent.com/5442mako/image-host-/main/image196.webp"> é¡”ã‚¢ãƒƒãƒ—ï¼ˆ5,000å††ï¼‰</label>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="ãƒã‚¹ãƒˆã‚¢ãƒƒãƒ—ï¼ˆ8000å††ï¼‰" data-imgs="https://raw.githubusercontent.com/5442mako/image-host-/main/575755441817780548.webp"> ãƒã‚¹ãƒˆã‚¢ãƒƒãƒ—ï¼ˆ8,000å††ï¼‰</label>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="è†ä¸Šï¼ˆ10000å††ï¼‰" data-imgs="https://raw.githubusercontent.com/5442mako/image-host-/main/image107.webp"> è†ä¸Šï¼ˆ10,000å††ï¼‰</label>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="å…¨èº«ï¼ˆ13000å††ï¼‰" data-imgs="https://raw.githubusercontent.com/5442mako/image-host-/main/ã‚¤ãƒ©ã‚¹ãƒˆ210.webp"> å…¨èº«ï¼ˆ13,000å††ï¼‰</label>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="Live2Dç”¨ã‚¤ãƒ©ã‚¹ãƒˆãƒ‘ãƒ¼ãƒ„åˆ†ã‘ï¼ˆ40000å††ï¼‰" > Live2Dç”¨ã‚¤ãƒ©ã‚¹ãƒˆãƒ‘ãƒ¼ãƒ„åˆ†ã‘ï¼ˆ40,000å††ï¼‰</label>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="Live2Dãƒã‚¹ãƒˆã‚¢ãƒƒãƒ—ï¼ˆ25000å††ï¼‰" > Live2Dãƒã‚¹ãƒˆã‚¢ãƒƒãƒ—ï¼ˆ25,000å††ï¼‰</label>
Â  Â  Â  <label><input type="radio" name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—" value="ã‚­ãƒ£ãƒ©ãƒ»è¡£è£…ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆ15000å††ï¼‰" > ã‚­ãƒ£ãƒ©ãƒ»è¡£è£…ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆ15,000å††ï¼‰</label>
Â  Â  Â  <p id="typeErrorMessage" class="error-message is-hidden">â€»ã”å¸Œæœ›ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
Â  Â  Â  <div id="typeImageBelowOptions" class="preview"></div>

Â  Â  Â  <h3>ã€è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰ã€‘<span class="required-note">â€»å¿…é ˆã€‚</span></h3>
Â  Â  Â  <label><input type="checkbox" class="option additional-option-item" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³[]" value="èƒŒæ™¯ï¼ˆ3000å††ï¼‰" data-imgs="https://raw.githubusercontent.com/5442mako/image-host-/main/image209.webp"> èƒŒæ™¯ï¼ˆ3,000å††ã€œï¼‰</label>
Â  Â  Â  <label><input type="checkbox" class="option additional-option-item" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³[]" value="ç´°ã‹ã„èƒŒæ™¯ï¼ˆ15000å††ï¼‰" data-imgs="https://raw.githubusercontent.com/5442mako/image-host-/main/image216.webp"> ç´°ã‹ã„èƒŒæ™¯ï¼ˆ15,000å††ã€œï¼‰</label>
Â  Â  Â  <label><input type="checkbox" class="option additional-option-item" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³[]" value="ç´°ã‹ã„è£…é£¾ï¼ˆ5000å††ï¼‰" > ç´°ã‹ã„è£…é£¾ï¼ˆ5,000å††ï¼‰</label>
Â  Â  Â  <label><input type="checkbox" class="option additional-option-item" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³[]" value="ã¬ã„ãã‚‹ã¿ãƒ»å¤§ãã‚ã‚¢ã‚¯ã‚»ï¼ˆ5000å††ï¼‰" > ã¬ã„ãã‚‹ã¿ï¼ˆå‹•ç‰©ãªã©ï¼‰ãƒ»å¤§ãã‚ã‚¢ã‚¯ã‚»ï¼ˆ5,000å††ï¼‰</label>
Â  Â  Â  <label><input type="checkbox" class="option additional-option-item" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³[]" value="è¿½åŠ è¡£è£…ï¼ˆ10000å††ï¼‰"> è¿½åŠ è¡£è£…ï¼ˆ1ç€ã”ã¨10,000å††ï¼‰</label>
Â  Â  Â  <label><input type="checkbox" class="option additional-option-item" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³[]" value="å•†ç”¨åˆ©ç”¨ï¼ˆ5000å††ï¼‰"> å•†ç”¨åˆ©ç”¨ï¼ˆ5,000å††ï¼‰</label>
Â  Â  Â  <label><input type="checkbox" class="option" id="noOptionCheckbox" name="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³" value="è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—"> è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—</label>
Â  Â  Â  <div id="optionPreview" class="preview"></div>

Â  Â  Â  <h3>ã€åˆè¨ˆã€‘</h3>
Â  Â  Â  <div class="total">ç°¡æ˜“è¦‹ç©åˆè¨ˆé‡‘é¡ï¼šÂ¥<span id="total">0</span></div>
Â  Â  Â  <input type="hidden" name="åˆè¨ˆé‡‘é¡" id="totalInput">
Â  Â  Â  <div class="estimate-note">
Â  Â  Â  Â  â€»ã“ã®é‡‘é¡ã¯ã‚ãã¾ã§ç›®å®‰ã§ã™ã€‚<br>
Â  Â  Â  Â  â€»å®Ÿéš›ã®è²»ç”¨ã¯å†…å®¹ã‚’ç¢ºèªã®ã†ãˆã€<br>æ­£å¼ã«ãŠè¦‹ç©ã‚‚ã‚Šã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
Â  Â  Â  </div>
Â  Â  Â Â 
Â  Â  Â  <h3 id="contactInfoSectionH3">ã€ã”é€£çµ¡å…ˆã€‘</h3>
Â  Â  Â  <p>ãŠåå‰orãƒãƒ³ãƒ‰ãƒ«ãƒãƒ¼ãƒ <span class="required-note">â€»å¿…é ˆã€‚</span></p>
Â  Â  Â  <input type="text" id="name" name="ãŠåå‰" placeholder="â€»ä¾‹ï¼šèŠ±æŸã®ä½äººã€yamada100">
Â  Â  Â  <p id="nameErrorMessage" class="error-message is-hidden">â€»ãŠåå‰orãƒãƒ³ãƒ‰ãƒ«ãƒãƒ¼ãƒ ã‚’ã”å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
Â  Â  Â  <p>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹<span class="required-note">â€»å¿…é ˆã€‚</span></p>
Â  Â  Â  <input type="email" id="email" name="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹" placeholder="â€»ä¾‹ï¼šexample@gmail.com">
Â  Â  Â  <p id="emailErrorMessage" class="error-message is-hidden">â€»æ­£ã—ã„ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã”å…¥åŠ›ãã ã•ã„ã€‚</p>
Â  Â  Â Â 
Â  Â  Â  <h3>ã€ã”ä¾é ¼ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€‘<span class="required-note">â€»å¿…é ˆã€‚</span></h3>
Â  Â  Â  <textarea id="note" name="ã”ä¾é ¼ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ" placeholder="ã”è¦æœ›ãŒã‚ã‚Œã°ã”è‡ªç”±ã«ã”è¨˜å…¥ãã ã•ã„ã€‚ä¾‹ï¼šé«ªè‰²ãƒ»æœè£…ãƒ»æ€§æ ¼ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ä½¿ç”¨ç›®çš„ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ãƒ»Live2Dãªã©ï¼‰ï¼ãƒãƒ¼ã‚ºã‚„æ§‹å›³ï¼èƒŒæ™¯ã®æœ‰ç„¡ ãªã©" rows="30">

ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼

ã€ç´æœŸã€‘ï¼š
ã€ç´æœŸã®å‰å€’ã—ã®å¯å¦ã€‘ï¼š
ã€ä½¿ç”¨ç”¨é€”ã€‘ï¼š
ã€ã‚¤ãƒ©ã‚¹ãƒˆã‚µã‚¤ã‚ºã€‘ï¼š
ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æœ‰ç„¡ã€‘ï¼š
ã€ç´å“å½¢å¼ã€‘ï¼š
ã€ã‚­ãƒ£ãƒ©ã®å¹´é½¢ã€‘ï¼š
ã€ã”å¸Œæœ›ã®é ­èº«ã€‘ï¼š
ã€ã”å¸Œæœ›ã®æ§‹å›³ã€‘ï¼š
ã€ã”å¸Œæœ›ã®ãƒãƒ¼ã‚ºã€‘ï¼š
ã€é›°å›²æ°—ã€‘ï¼š
ã€è¡¨æƒ…ã€‘ï¼š

ã€å®Ÿç¸¾å…¬é–‹å¯èƒ½æ—¥æ™‚ã€‘ï¼š

ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
ä»»æ„æ¬„

â—ã”ä¾é ¼æ¤œè¨ã®æ±ºã‚æ‰‹ã¨ãªã£ãŸã‚¤ãƒ©ã‚¹ãƒˆãªã©ãŒã‚ã‚Œã°ãŠæ•™ãˆãã ã•ã„

â—ãã®ä»–ã”ç›¸è«‡ã—ãŸã„äº‹ãªã©ã”ã–ã„ã¾ã—ãŸãŠæ•™ãˆãã ã•ã„

è©³ç´°è³‡æ–™ãªã©ã”ã–ã„ã¾ã—ãŸã‚‰ã”æç¤ºé ‚ã‘ã¾ã™ã¨åŠ©ã‹ã‚Šã¾ã™ã€‚
ãŠæ‰‹æ•°ãŠæ›ã‘è‡´ã—ã¾ã™ãŒã©ã†ãã‚ˆã‚ã—ããŠé¡˜ã„è‡´ã—ã¾ã™ã€‚
</textarea>
Â  Â  Â Â 
Â  Â  Â  <h3 id="imageSectionH3">ã€å‚è€ƒç”»åƒï¼ˆæ·»ä»˜ï¼‰ã€‘</h3>
Â  Â  Â  <input type="file" id="imageFile" name="å‚è€ƒç”»åƒ[]" accept="image/*" multiple>
Â  Â  Â  <p class="section-description">â€»å‚è€ƒè³‡æ–™ãªã©ã‚ã‚Šã¾ã—ãŸã‚‰ç”»åƒã‚’æ·»ä»˜ã—ã¦ãã ã•ã„ã€‚<br>Windowsã®æ–¹ã¯Ctrlã‚­ãƒ¼ã€Macã®æ–¹ã¯Commandã‚­ãƒ¼ã‚’æŠ¼ã—ãªãŒã‚‰ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã§ãã¾ã™ã€‚ï¼ˆæœ€å¤§5æšï¼‰</p>
Â  Â  Â  <div id="filePreviewContainer"></div>
Â  Â  Â  <p id="fileErrorMessage" class="error-message is-hidden">â€»ãƒ•ã‚¡ã‚¤ãƒ«ã¯5æšã¾ã§ã—ã‹é¸æŠã§ãã¾ã›ã‚“ã€‚</p>
Â  Â  Â  <button id="submitBtn" type="submit">é€ä¿¡</button>
Â  Â  </form>
Â  </div>
</div>

<div id="completeMessage" class="complete is-hidden">
Â  <h2>é€ä¿¡ãŒå®Œäº†ã—ã¾ã—ãŸï¼</h2>
Â  <p>ãŠå•ã„åˆã‚ã›ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>
Â  <p>ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’ç¢ºèªæ¬¡ç¬¬ã€3å–¶æ¥­æ—¥ä»¥å†…ã«ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚</p>
Â  <p>3å–¶æ¥­æ—¥ã‚’éãã¦ã‚‚è¿”ä¿¡ãŒãªã„å ´åˆã¯ã€<br>ãŠæ‰‹æ•°ã§ã™ãŒã€Xã®DMã«ã¦ã”é€£çµ¡ã„ãŸã ã‘ã¾ã™ã¨å¹¸ã„ã§ã™ã€‚</p>
</div>

<div id="loadingOverlay">
Â  <div class="spinner"></div>
Â  <div id="loadingText">é€ä¿¡ä¸­ã§ã™...ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚</div>
</div>

<div id="previewPanel">
Â  <h4>é¸æŠå†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h4>
Â  <p><strong>ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—:</strong> <span id="previewType">æœªé¸æŠ</span></p>
Â  <p><strong>è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³:</strong> <span id="previewOptions">ãªã—</span></p>
Â  <p><strong>ç°¡æ˜“è¦‹ç©åˆè¨ˆé‡‘é¡ï¼š</strong> <span id="previewTotal" class="preview-total-highlight">0</span></p>
</div>

<div class="popup-overlay" id="popupOverlay">
Â  <img id="popupImage" src="" alt="æ‹¡å¤§ç”»åƒ" loading="lazy" decoding="async">
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
Â  Â  // --- DOMè¦ç´ ã®å–å¾— ---
Â  Â  const formContainer = document.getElementById("formContainer");
Â  Â  const completeMessage = document.getElementById("completeMessage");
Â  Â  const estimateForm = document.getElementById("estimateForm");
Â  Â  const totalEl = document.getElementById("total");
Â  Â  const submitBtn = document.getElementById("submitBtn");
Â  Â  const optionPreviewContainer = document.getElementById("optionPreview");
Â  Â  const typePreviewContainer = document.getElementById('typeImageBelowOptions');
Â  Â  const radios = document.querySelectorAll('input[name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—"]');
Â  Â  const allOptionCheckboxes = document.querySelectorAll('.option');
Â  Â  const noOptionCheckbox = document.getElementById('noOptionCheckbox');
Â  Â  const actualOptionItems = document.querySelectorAll('.additional-option-item');
Â  Â  const previewPanel = document.getElementById('previewPanel');
Â  Â  const popupOverlay = document.getElementById("popupOverlay");
Â  Â  const popupImage = document.getElementById("popupImage");
Â  Â  const previewTypeEl = document.getElementById("previewType");
Â  Â  const previewOptionsEl = document.getElementById("previewOptions");
Â  Â  const previewTotalEl = document.getElementById("previewTotal");
Â  Â  const nameInput = document.getElementById("name");
Â  Â  const emailInput = document.getElementById("email");
Â  Â  const noteTextarea = document.getElementById("note");
Â  Â  const imageFileInput = document.getElementById("imageFile");
Â  Â  const nameErrorMessage = document.getElementById("nameErrorMessage");
Â  Â  const emailErrorMessage = document.getElementById("emailErrorMessage");
Â  Â  const typeErrorMessage = document.getElementById("typeErrorMessage");
Â  Â  const fileErrorMessage = document.getElementById("fileErrorMessage");
Â  Â  const illustrationTypeSectionH3 = document.getElementById("illustrationTypeSectionH3");
Â  Â  const contactInfoSectionH3 = document.getElementById("contactInfoSectionH3");
Â  Â  const filePreviewContainer = document.getElementById('filePreviewContainer');
Â  Â  const loadingOverlay = document.getElementById('loadingOverlay');
Â  Â  const loadingText = document.getElementById('loadingText');
Â  Â  const totalInput = document.getElementById('totalInput');

    // â˜…â˜…â˜… ã“ã“ã«ã‚ãªãŸã®GASã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã®URLã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ â˜…â˜…â˜…
    const GAS_WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxO.../exec";

Â  Â  let selectedFiles = []; // é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç®¡ç†ã™ã‚‹é…åˆ—

Â  Â  // --- é–¢æ•°å®šç¾© ---
Â  Â  const showLoading = (text) => {
Â  Â  Â  Â  loadingText.textContent = text;
Â  Â  Â  Â  loadingOverlay.style.opacity = '1';
Â  Â  Â  Â  loadingOverlay.style.visibility = 'visible';
Â  Â  };

Â  Â  const hideLoading = () => {
Â  Â  Â  Â  loadingOverlay.style.opacity = '0';
Â  Â  Â  Â  loadingOverlay.style.visibility = 'hidden';
Â  Â  };

Â  Â  const showPopup = (src) => {
Â  Â  Â  Â  popupImage.src = src;
Â  Â  Â  Â  popupOverlay.style.display = "flex";
Â  Â  };
Â  Â  const hidePopup = () => {
Â  Â  Â  Â  popupOverlay.style.display = "none";
Â  Â  };

Â  Â  const updatePreviewPanel = () => {
Â  Â  Â  Â  const selectedTypeRadio = document.querySelector('input[name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—"]:checked');
Â  Â  Â  Â  previewTypeEl.textContent = selectedTypeRadio ? selectedTypeRadio.parentElement.textContent.trim().replace(/ï¼ˆ[\d,]+å††ï¼‰$/, '') : "æœªé¸æŠ";

Â  Â  Â  Â  let optionsText = "ãªã—";
Â  Â  Â  Â  if (noOptionCheckbox?.checked) {
Â  Â  Â  Â  Â  Â  optionsText = noOptionCheckbox.parentElement.textContent.trim().replace(/ï¼ˆ[\d,]+å††ï¼‰$/, '');
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  const checkedOptions = Array.from(actualOptionItems).filter(opt => opt.checked);
Â  Â  Â  Â  Â  Â  if (checkedOptions.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  optionsText = checkedOptions.map(opt => opt.parentElement.textContent.trim().replace(/ï¼ˆ[\d,]+å††ï¼‰$/, '')).join(", ");
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  previewOptionsEl.textContent = optionsText;
Â  Â  Â  Â  previewTotalEl.textContent = "Â¥" + totalEl.textContent;
Â  Â  };

Â  Â  const calculateTotal = () => {
Â  Â  Â  Â  let total = 0;
Â  Â  Â  Â  const selectedType = document.querySelector('input[name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—"]:checked');
Â  Â  Â  Â  if (selectedType) total += parseInt(selectedType.value.match(/\d+/)?.at(0), 10);

Â  Â  Â  Â  if (!noOptionCheckbox?.checked) {
Â  Â  Â  Â  Â  Â  actualOptionItems.forEach(opt => {
Â  Â  Â  Â  Â  Â  Â  Â  const valueMatch = opt.value.match(/\d+/);
Â  Â  Â  Â  Â  Â  Â  Â  if (opt.checked && valueMatch) total += parseInt(valueMatch[0], 10);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  totalEl.textContent = total.toLocaleString();
Â  Â  Â  Â  totalInput.value = total;
Â  Â  Â  Â  updatePreviewPanel();
Â  Â  };
Â  Â Â 
Â  Â  const createPreviewImage = (url, altText, container, isOption = false) => {
Â  Â  Â  Â  const img = document.createElement('img');
Â  Â  Â  Â  img.src = url;
Â  Â  Â  Â  img.alt = altText;
Â  Â  Â  Â  img.loading = 'lazy';
Â  Â  Â  Â  img.decoding = 'async';
Â  Â  Â  Â  img.style.cursor = 'pointer';
Â  Â  Â  Â  img.style.borderRadius = '6px';
Â  Â  Â  Â  img.onclick = () => showPopup(img.src);
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (isOption) {
Â  Â  Â  Â  Â  Â  img.style.maxWidth = "150px";
Â  Â  Â  Â  Â  Â  img.style.maxHeight = "150px";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  img.style.maxWidth = '50%';
Â  Â  Â  Â  Â  Â  img.style.maxHeight = '200px';
Â  Â  Â  Â  Â  Â  img.style.boxSizing = 'border-box';
Â  Â  Â  Â  Â  Â  img.style.padding = '0 5px';
Â  Â  Â  Â  Â  Â  img.style.display = 'inline-block';
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  container.appendChild(img);
Â  Â  };

Â  Â  const updateTypePreview = () => {
Â  Â  Â  Â  typePreviewContainer.innerHTML = '';
Â  Â  Â  Â  const selected = document.querySelector('input[name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—"]:checked');
Â  Â  Â  Â  if (selected?.dataset.imgs) {
Â  Â  Â  Â  Â  Â  const imageUrls = selected.dataset.imgs.split(',').map(url => url.trim()).filter(Boolean);
Â  Â  Â  Â  Â  Â  imageUrls.forEach(url => createPreviewImage(url, "ã‚¿ã‚¤ãƒ—ç”»åƒ", typePreviewContainer));
Â  Â  Â  Â  Â  Â  if (imageUrls.length > 0) {
Â  Â  Â  Â  Â  Â  Â  Â  const note = document.createElement("p");
Â  Â  Â  Â  Â  Â  Â  Â  note.textContent = "â€»ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§ã—ã¾ã™ã€‚";
Â  Â  Â  Â  Â  Â  Â  Â  note.className = "preview-note";
Â  Â  Â  Â  Â  Â  Â  Â  typePreviewContainer.appendChild(note);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  };

Â  Â  const updateOptionPreview = () => {
Â  Â  Â  Â  optionPreviewContainer.innerHTML = '';
Â  Â  Â  Â  actualOptionItems.forEach(opt => {
Â  Â  Â  Â  Â  Â  if (opt.checked && opt.dataset.imgs) {
Â  Â  Â  Â  Â  Â  Â  Â  const wrapper = document.createElement("div");
Â  Â  Â  Â  Â  Â  Â  Â  wrapper.className = "optionImageWrapper";
Â  Â  Â  Â  Â  Â  Â  Â  createPreviewImage(opt.dataset.imgs, "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç”»åƒ", wrapper, true);
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  const note = document.createElement("p");
Â  Â  Â  Â  Â  Â  Â  Â  note.textContent = "â€»ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§ã—ã¾ã™ã€‚";
Â  Â  Â  Â  Â  Â  Â  Â  note.className = "preview-note";
Â  Â  Â  Â  Â  Â  Â  Â  wrapper.appendChild(note);
Â  Â  Â  Â  Â  Â  Â  Â  optionPreviewContainer.appendChild(wrapper);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  };
Â  Â Â 
Â  Â  // ãƒ•ã‚¡ã‚¤ãƒ«ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
Â  Â  const renderFilePreview = () => {
Â  Â  Â  Â  filePreviewContainer.innerHTML = '';
Â  Â  Â  Â  selectedFiles.forEach((file, index) => {
Â  Â  Â  Â  Â  Â  const previewItem = document.createElement('div');
Â  Â  Â  Â  Â  Â  previewItem.className = 'file-preview-item';

Â  Â  Â  Â  Â  Â  const fileName = document.createElement('span');
Â  Â  Â  Â  Â  Â  fileName.textContent = file.name;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  const removeBtn = document.createElement('button');
Â  Â  Â  Â  Â  Â  removeBtn.textContent = 'å‰Šé™¤';
Â  Â  Â  Â  Â  Â  removeBtn.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  selectedFiles.splice(index, 1);
Â  Â  Â  Â  Â  Â  Â  Â  renderFilePreview();
Â  Â  Â  Â  Â  Â  Â  Â  if (selectedFiles.length === 0) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  imageFileInput.value = ''; // ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆãŒç©ºã«ãªã£ãŸã‚‰inputã‚’ãƒªã‚»ãƒƒãƒˆ
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  };

Â  Â  Â  Â  Â  Â  previewItem.appendChild(fileName);
Â  Â  Â  Â  Â  Â  previewItem.appendChild(removeBtn);
Â  Â  Â  Â  Â  Â  filePreviewContainer.appendChild(previewItem);
Â  Â  Â  Â  });
Â  Â  };

Â  Â  const handleSubmit = async (event) => {
Â  Â  Â  Â  event.preventDefault();
Â  Â  Â  Â  let hasError = false;
Â  Â  Â  Â  let firstErrorElement = null;

Â  Â  Â  Â  // Reset errors
Â  Â  Â  Â  radios.forEach(input => input.parentElement.classList.remove("highlight-error"));
Â  Â  Â  Â  typeErrorMessage.classList.add('is-hidden');
Â  Â  Â  Â  nameInput.classList.remove("input-error");
Â  Â  Â  Â  nameErrorMessage.classList.add("is-hidden");
Â  Â  Â  Â  emailInput.classList.remove("input-error");
Â  Â  Â  Â  emailErrorMessage.classList.add("is-hidden");
Â  Â  Â  Â  fileErrorMessage.classList.add("is-hidden");
        
        // Validation
Â  Â  Â  Â  const selectedType = document.querySelector('input[name="ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—"]:checked');
Â  Â  Â  Â  if (!selectedType) {
Â  Â  Â  Â  Â  Â  hasError = true;
Â  Â  Â  Â  Â  Â  firstErrorElement = illustrationTypeSectionH3;
Â  Â  Â  Â  Â  Â  radios.forEach(input => input.parentElement.classList.add("highlight-error"));
Â  Â  Â  Â  Â  Â  typeErrorMessage.classList.remove('is-hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  const name = nameInput.value.trim();
Â  Â  Â  Â  if (!name) {
Â  Â  Â  Â  Â  Â  hasError = true;
Â  Â  Â  Â  Â  Â  nameInput.classList.add("input-error");
Â  Â  Â  Â  Â  Â  nameErrorMessage.classList.remove("is-hidden");
Â  Â  Â  Â  Â  Â  if (!firstErrorElement) firstErrorElement = contactInfoSectionH3;
Â  Â  Â  Â  }

Â  Â  Â  Â  const email = emailInput.value.trim();
Â  Â  Â  Â  if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
Â  Â  Â  Â  Â  Â  hasError = true;
Â  Â  Â  Â  Â  Â  emailInput.classList.add("input-error");
Â  Â  Â  Â  Â  Â  emailErrorMessage.classList.remove("is-hidden");
Â  Â  Â  Â  Â  Â  if (!firstErrorElement) firstErrorElement = contactInfoSectionH3;
Â  Â  Â  Â  }

Â  Â  Â  Â  if (selectedFiles.length > 5) {
Â  Â  Â  Â  Â  Â  hasError = true;
Â  Â  Â  Â  Â  Â  fileErrorMessage.classList.remove('is-hidden');
Â  Â  Â  Â  }

Â  Â  Â  Â  if (hasError) {
Â  Â  Â  Â  Â  Â  firstErrorElement?.scroll-into-view({ behavior: 'smooth', block: 'center' });
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Prevent submission if no options are selected
Â  Â  Â  Â  const selectedOptions = document.querySelectorAll('.additional-option-item:checked');
Â  Â  Â  Â  if (selectedOptions.length === 0 && !noOptionCheckbox.checked) {
Â  Â  Â  Â  Â  Â  Â alert('è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã™ã‚‹ã‹ã€ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚');
Â  Â  Â  Â  Â  Â  Â return;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
        // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’GASã«é€ä¿¡ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
        const requestData = {
            name: nameInput.value,
            email: emailInput.value,
            total: totalInput.value,
            note: noteTextarea.value,
            typeLabel: selectedType.parentElement.textContent.trim(),
            optionLabels: Array.from(document.querySelectorAll('.option:checked')).map(opt => opt.parentElement.textContent.trim()),
            // ç”»åƒãƒ‡ãƒ¼ã‚¿ã¯base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦JSONã«å«ã‚ã‚‹
            images: await Promise.all(selectedFiles.map(async file => {
                const base64 = await new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onloadend = () => resolve(reader.result);
                    reader.readAsDataURL(file);
                });
                return {
                    image: base64,
                    imageName: file.name
                };
            }))
        };
Â  Â  Â  Â Â 
Â  Â  Â  Â  // GASé€ä¿¡ãƒ­ã‚¸ãƒƒã‚¯ã«ç½®ãæ›ãˆ
        showLoading("é€ä¿¡ä¸­ã§ã™...ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚");
        submitBtn.disabled = true;

Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch(GAS_WEB_APP_URL, {
                method: 'POST',
                mode: 'cors', // CORSã‚’è¨±å¯
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(requestData)
            });

            const result = await response.json();

            if (response.ok && result.status === 'success') {
Â  Â  Â  Â  Â  Â  Â  Â  formContainer.classList.add("is-hidden");
Â  Â  Â  Â  Â  Â  Â  Â  completeMessage.classList.remove("is-hidden");
Â  Â  Â  Â  Â  Â  Â  Â  previewPanel?.classList.add("is-hidden");
            } else {
                alert(`é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nã‚¨ãƒ©ãƒ¼: ${result.message || 'ä¸æ˜ãªã‚¨ãƒ©ãƒ¼'}`);
            }
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  alert("é€ä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\n" + error.message);
Â  Â  Â  Â  } finally {
Â  Â  Â  Â  Â  Â  hideLoading();
Â  Â  Â  Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  Â  }
Â  Â  };
Â  Â Â 
Â  Â  // --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š ---
Â  Â  popupOverlay.addEventListener('click', hidePopup);
Â  Â  document.addEventListener('contextmenu', e => { if (e.target.tagName === "IMG") e.preventDefault(); });
Â  Â  document.addEventListener('dragstart', e => { if (e.target.tagName === "IMG") e.preventDefault(); });
Â  Â  radios.forEach(r => r.addEventListener('change', () => { calculateTotal(); updateTypePreview(); }));
Â  Â  allOptionCheckboxes.forEach(checkbox => {
Â  Â  Â  Â  checkbox.addEventListener('change', () => {
Â  Â  Â  Â  Â  Â  if (checkbox === noOptionCheckbox && checkbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  actualOptionItems.forEach(opt => { opt.checked = false; });
Â  Â  Â  Â  Â  Â  } else if (checkbox.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  if (noOptionCheckbox) noOptionCheckbox.checked = false;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  calculateTotal();
Â  Â  Â  Â  Â  Â  updateOptionPreview();
Â  Â  Â  Â  });
Â  Â  });
Â  Â Â 
Â  Â  // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠæ™‚ã®ã‚¤ãƒ™ãƒ³ãƒˆ
Â  Â  imageFileInput.addEventListener('change', (event) => {
Â  Â  Â  Â  fileErrorMessage.classList.add("is-hidden");
Â  Â  Â  Â  const newFiles = Array.from(event.target.files);
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (newFiles.length > 5) {
Â  Â  Â  Â  Â  Â  fileErrorMessage.classList.remove('is-hidden');
Â  Â  Â  Â  Â  Â  // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã‚’ãƒªã‚»ãƒƒãƒˆ
Â  Â  Â  Â  Â  Â  imageFileInput.value = '';
Â  Â  Â  Â  Â  Â  selectedFiles = [];
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // æ–°ã—ãé¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã§é…åˆ—ã‚’ç½®ãæ›ãˆ
Â  Â  Â  Â  Â  Â  selectedFiles = newFiles;
Â  Â  Â  Â  }
Â  Â  Â  Â  renderFilePreview();
Â  Â  });
Â  Â Â 
Â  Â  estimateForm.addEventListener('submit', handleSubmit);
Â  Â Â 
Â  Â  // Responsive panel movement
Â  Â  const originalPreviewPanelParent = previewPanel?.parentElement;
Â  Â  const originalPreviewPanelNextSibling = previewPanel?.nextSibling;
Â  Â  const movePreviewPanel = () => {
Â  Â  Â  Â  if (!previewPanel || !estimateForm || !submitBtn) return;
Â  Â  Â  Â  if (window.innerWidth <= 980) {
Â  Â  Â  Â  Â  Â  if (previewPanel.parentElement !== estimateForm) {
Â  Â  Â  Â  Â  Â  Â  Â  estimateForm.insertBefore(previewPanel, submitBtn);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  if (previewPanel.parentElement === estimateForm) {
Â  Â  Â  Â  Â  Â  Â  Â  originalPreviewPanelParent.insertBefore(previewPanel, originalPreviewPanelNextSibling);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  };
Â  Â  window.addEventListener('resize', movePreviewPanel);

Â  Â  // åˆæœŸåŒ–
Â  Â  calculateTotal();
Â  Â  updateTypePreview();
Â  Â  updateOptionPreview();
Â  Â  movePreviewPanel();
});
</script>
</body>
</html>
