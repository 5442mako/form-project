<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ã‚¤ãƒ©ã‚¹ãƒˆç”³ã—è¾¼ã¿</title>
<meta name="robots" content="noai, noimageai">
<meta name="googlebot" content="noindex, nofollow">
<meta name="referrer" content="no-referrer">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ã‚¤ãƒ©ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šãƒ•ã‚©ãƒ¼ãƒ </title>
<style>
/*å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š*/
body {
font-family: 'Helvetica Neue', sans-serif;
background-color: #f4f4f9;
display: flex;
justify-content: center;
padding: 40px;
flex-direction: column;
align-items: center;
}

/*ãƒ•ã‚©ãƒ¼ãƒ æœ¬ä½“ã®ã‚³ãƒ³ãƒ†ãƒŠè£…é£¾*/
.container {
background: white;
padding: 50px 40px;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
width: 100%;
max-width: 700px;
box-sizing: border-box;
}

/*é€ä¿¡å®Œäº†ã®è¡¨ç¤º*/
.complete {
text-align: center;
padding: 40px;
background-color: #fff;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
max-width: 500px;
margin: 20px auto;
}

/*ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç­‰ã®è£…é£¾*/
h2, h3 { color: #333; }
h3 {
font-size: 1.15em;
font-weight: 600;
color: #333;
margin-top: 40px;
padding-bottom: 8px;
display: flex;
align-items: center;
gap: 8px;
border-bottom: 2px solid #ff91d7;
}

/*ãƒ©ãƒ™ãƒ«ã¨å…¥åŠ›æ¬„ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ*/
label { display: block; margin: 6px 0; color: #222; }
input[type="text"],
input[type="email"],
textarea {
font-size: 16px;
width: 100%;
padding: 10px;
margin-top: 6px;
margin-bottom: 20px;
border: 1px solid #ccc;
border-radius: 6px;
box-sizing: border-box;
}
input[type="text"].input-error, /* ã‚¨ãƒ©ãƒ¼æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
input[type="email"].input-error {
border-color: red !important;
outline: 1px solid red;
background-color: #fff8f8;
}
label.highlight-error { /* ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—æœªé¸æŠæ™‚ã®ãƒ©ãƒ™ãƒ«ã‚¹ã‚¿ã‚¤ãƒ« */
Â  Â  color: red !important;
}


input[type="file"] { margin-bottom: 20px; }

/*é€ä¿¡ãƒœã‚¿ãƒ³*/
button#submitBtn {
background-color: #446dff; color: white; padding: 12px 20px;
border: none; border-radius: 6px; font-size: 1em; width: 100%;
cursor: pointer; margin: 30px;
}
button#submitBtn[disabled] {
background-color: #888;
cursor: not-allowed;
}
button#submitBtn:hover:not([disabled]) { background-color: #2c52d2; }

/*åˆè¨ˆé‡‘é¡ã®è¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ«*/
.total { font-size: 1.4em; color: #2c7a00; font-weight: bold; text-align: center; margin-top: 20px; }

/*ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒã®è¡¨ç¤ºã‚¹ã‚¿ã‚¤ãƒ«*/
.preview img {
max-width: 100%; max-height: 200px; margin-top: 10px; border-radius: 6px;
}

/* --- é¸æŠå†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« (èª¿æ•´å¾Œ) --- */
#previewPanel {
Â  Â  position: fixed;
Â  Â  bottom: 20px;
Â  Â  right: 20px;
Â  Â  width: 270px;
Â  Â  background: #ffffff;
Â  Â  border: 1px solid #e0e0e0;
Â  Â  border-top: 4px solid #ff8cc6;
Â  Â  border-radius: 8px;
Â  Â  box-shadow: 0 5px 18px rgba(0, 0, 0, 0.1);
Â  Â  padding: 18px 22px;
Â  Â  z-index: 1000;
Â  Â  font-size: 13.5px;
Â  Â  box-sizing: border-box;
}

#previewPanel h4 {
Â  Â  font-size: 1.15em;
Â  Â  color: #2c2c2c;
Â  Â  margin-top: 0;
Â  Â  margin-bottom: 16px;
Â  Â  padding-bottom: 12px;
Â  Â  border-bottom: 1px solid #f0f0f0;
Â  Â  display: flex;
Â  Â  align-items: center;
}

#previewPanel h4::before {
Â  Â  content: 'ğŸ“‹';
Â  Â  margin-right: 8px;
Â  Â  font-size: 1.1em;
Â  Â  color: #ff8cc6;
}

#previewPanel p {
Â  Â  margin-bottom: 10px;
Â  Â  padding-bottom: 10px;
Â  Â  border-bottom: 1px solid #f5f5f5;
Â  Â  line-height: 1.4;
}
#previewPanel p:last-child { /* åˆè¨ˆé‡‘é¡ã®è¡Œ */
Â  Â  Â border-bottom: none;
Â  Â  Â margin-bottom: 0;
Â  Â  Â padding-bottom: 0;
Â  Â  Â margin-top: 12px;
Â  Â  Â padding-top: 12px;
Â  Â  Â border-top: 1px solid #e9e9e9;
}


#previewPanel p strong {
Â  Â  display: block;
Â  Â  color: #444;
Â  Â  font-weight: 600;
Â  Â  margin-bottom: 6px;
Â  Â  font-size: 0.9em;
}

#previewPanel p span:not(.preview-total-highlight) {
Â  Â  display: block;
Â  Â  color: #333;
Â  Â  padding-left: 8px;
Â  Â  font-size: 0.95em;
Â  Â  word-break: break-word;
Â  Â  line-height: 1.55;
}

#previewPanel .preview-total-highlight {
Â  Â  font-size: 1.65em;
Â  Â  color: #1a650e;
Â  Â  font-weight: bold;
Â  Â  background-color: #e6f4e3;
Â  Â  padding: 7px 14px;
Â  Â  border-radius: 6px;
Â  Â  display: inline-block;
Â  Â  text-align: left;
Â  Â  border: 1px solid #c8e6c1;
Â  Â  margin-top: 4px;
}
/* --- é¸æŠå†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ«ã“ã“ã¾ã§ --- */


/*å‚è€ƒç”»åƒã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—*/
.popup-overlay {
position: fixed;
top: 0; left: 0;
width: 100%; height: 100%;
background: rgba(0,0,0,0.8);
display: none;
align-items: center;
justify-content: center;
z-index: 9999;
}
.popup-overlay img {
max-width: 90%;
max-height: 90%;
border-radius: 10px;
box-shadow: 0 0 10px rgba(0,0,0,0.5);
}

#optionPreview {
display: flex;
flex-wrap: wrap;
gap: 10px;
margin-top: 10px;
}
.optionImageWrapper {
display: flex;
flex-direction: column;
align-items: center;
}

@media print {
img {
display: none !important;
}
}

.form-header {
Â  background-color: #ffffff;
Â  border-left: 6px solid #ff91d7;
Â  border-radius: 12px;
Â  padding: 20px; /* ä¸Šä¸‹å·¦å³ã®å†…éƒ¨ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’å‡ç­‰ã«ã™ã‚‹ã‹ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã«åˆã‚ã›ã¦èª¿æ•´ */
Â  margin-top: 36px; Â  Â /* ä¸Šãƒãƒ¼ã‚¸ãƒ³ã¯ç¶­æŒ */
Â  margin-bottom: 36px; /* ä¸‹ãƒãƒ¼ã‚¸ãƒ³ã‚‚ç¶­æŒ */
Â  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
Â  position: relative;
}

.form-header h2 {
font-size: 1.5em;
color: #2c2c2c;
font-weight: 600;
margin: 0 0 10px;
display: flex;
align-items: center;
gap: 10px;
justify-content: center;
text-align: center;
}


.form-header .disclaimer {
font-size: 12px;
color: #FF0000;
margin-top: 6px;
line-height: 1.5;
}

.disclaimer {
font-size: 12px;
color: #FF0000;
line-height: 1.6;
text-align: center;
}

body {
background-color: #f7f9fc;
}

.total {
font-size: 1.3em;
font-weight: bold;
color: #1e7c27;
text-align: center;
margin-top: 24px;
}
.estimate-note {
text-align: center;
color: #555;
font-size: 12px;
margin-top: 10px;
line-height: 1.5;
}

.section-description {
font-size: 0.9em;
color: #666;
margin: 4px 0 12px;
}

button {
transition: all 0.3s ease;
}
button:hover:not([disabled]) {
background-color: #ff69b4;
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.error-message {
display: none;
color: red;
font-size: 0.9em;
margin-top: -10px;
margin-bottom: 15px;
line-height: 1.4;
background-color: #fff0f0;
padding: 6px 8px;
border: 1px solid #ffcccc;
border-radius: 4px;
}

@media (max-width: 980px) {
Â  #previewPanel {
Â  Â  position: static;
Â  Â  width: 100%;
Â  Â  margin-top: 25px;
Â  Â  margin-bottom: 25px;
Â  Â  padding: 15px 18px;
Â  Â  box-shadow: 0 2px 10px rgba(0,0,0,0.08);
Â  Â  border-top-width: 3px;
Â  }

Â  #previewPanel h4 {
Â  Â  font-size: 1.1em;
Â  Â  margin-bottom: 15px;
Â  Â  padding-bottom: 10px;
Â  }
Â  Â #previewPanel h4::before {
Â  Â  font-size: 1em;
Â  }

Â  #previewPanel p {
Â  Â  margin-bottom: 8px;
Â  Â  padding-bottom: 8px;
Â  Â  line-height: 1.3;
Â  }

Â  #previewPanel p strong{
Â  Â  font-size: 0.85em;
Â  Â  margin-bottom: 4px;
Â  }
Â  #previewPanel p span:not(.preview-total-highlight){
Â  Â  font-size: 0.9em;
Â  Â  padding-left: 6px;
Â  }

Â  #previewPanel .preview-total-highlight {
Â  Â  font-size: 1.55em;
Â  Â  padding: 6px 12px;
Â  }

Â  body {
Â  Â  padding: 40px;
Â  }
Â  .container {
Â  Â  padding: 60px 20px;
Â  }
}

@media (max-width: 600px) {
Â  .container {
Â  Â  padding: 60px 15px;
Â  }

Â  .form-header h2 {
Â  Â  font-size: 1.3em;
Â  }

Â  h3 {
Â  Â  font-size: 1em;
Â  }

Â  input[type="text"],
Â  input[type="email"],
Â  textarea {
Â  Â  font-size: 16px;
Â  Â  padding: 12px;
Â  }
Â  Â #previewPanel {
Â  Â  padding: 12px 15px;
Â  Â  margin-top: 20px;
Â  Â  margin-bottom: 20px;
Â  }
Â  #previewPanel h4 {
Â  Â  font-size: 1.05em;
Â  }
Â  Â #previewPanel .preview-total-highlight {
Â  Â  font-size: 1.45em;
Â  Â }
Â  Â #previewPanel p strong{
Â  Â  font-size: 0.8em;
Â  Â }
Â  Â #previewPanel p span:not(.preview-total-highlight){
Â  Â  font-size: 0.85em;
Â  Â  padding-left: 5px;
Â  Â }
}

</style>
</head>
<body>
<div class="container" id="formContainer">

<hr color="#ff91d7">
<center><span style="color:#ff91d7; font-size: 12px;">*ãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»oã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚</span></center>
<p><hr color="#ff91d7"></p>

<div class="form-header">
<h2>ğŸ¨ ã‚¤ãƒ©ã‚¹ãƒˆè¦‹ç©ãƒ•ã‚©ãƒ¼ãƒ </h2>
<p class="disclaimer">
â€»æœ¬ãƒšãƒ¼ã‚¸ã«æ²è¼‰ã•ã‚ŒãŸç”»åƒã®ç„¡æ–­è»¢è¼‰ãƒ»ç„¡æ–­ä½¿ç”¨ã‚’ç¦æ­¢ã€‚<br>
â€»ä¸æ­£åˆ©ç”¨ãŒç™ºè¦šã—ãŸå ´åˆã€æå®³è«‹æ±‚ã®å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚
</p>
</div>
<form id="estimateForm" onsubmit="handleSubmit(event)">

<h3 id="illustrationTypeSectionH3">ğŸ–¼ï¸ ã”å¸Œæœ›ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—</h3>
<p class="section-description"><span style="color:#FF0000; font-size: 12px;">â€»å¿…é ˆã”å¸Œæœ›ã®ã‚¤ãƒ©ã‚¹ãƒˆæ§‹æˆã‚’1ã¤ãŠé¸ã³ãã ã•ã„ã€‚</span></p>

<div id="typePreview" class="preview"></div>
<label><input type="radio" name="type" value="5000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> é¡”ã‚¢ãƒƒãƒ—ï¼ˆ5,000å††ï¼‰</label>
<label><input type="radio" name="type" value="8000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/559117789085565435.jpg"> ãƒã‚¹ãƒˆã‚¢ãƒƒãƒ—ï¼ˆ8,000å††ï¼‰</label>
<label><input type="radio" name="type" value="10000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> è†ä¸Šï¼ˆ10,000å††ï¼‰</label>
<label><input type="radio" name="type" value="13000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/210-all.png"> å…¨èº«ï¼ˆ13,000å††ï¼‰</label>
<label><input type="radio" name="type" value="40000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> Live2Dç”¨ã‚¤ãƒ©ã‚¹ãƒˆãƒ‘ãƒ¼ãƒ„åˆ†ã‘ï¼ˆ40,000å††ï¼‰</label>
<label><input type="radio" name="type" value="25000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> Live2Dãƒã‚¹ãƒˆã‚¢ãƒƒãƒ—ï¼ˆ25,000å††ï¼‰</label>
<label><input type="radio" name="type" value="15000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> ã‚­ãƒ£ãƒ©ãƒ»è¡£è£…ãƒ‡ã‚¶ã‚¤ãƒ³ï¼ˆ15,000å††ï¼‰</label>

<p id="typeErrorMessage" class="error-message" style="display: none; font-size: 0.9em; margin: 8px 0;">
â€»ã”å¸Œæœ›ã®ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚
</p>

<div id="typeImageBelowOptions" class="preview"></div>

<h3>ğŸ’°åˆè¨ˆ</h3>
<div class="total">ç°¡æ˜“è¦‹ç©åˆè¨ˆé‡‘é¡ï¼šÂ¥<span id="total">0</span></div>
<div class="estimate-note">
â€»ã“ã®é‡‘é¡ã¯ã‚ãã¾ã§ç›®å®‰ã§ã™ã€‚<br>
â€»å®Ÿéš›ã®è²»ç”¨ã¯å†…å®¹ã‚’ç¢ºèªã®ã†ãˆã€æ­£å¼ã«ãŠè¦‹ç©ã‚‚ã‚Šã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
</div>


<h3>ğŸ¯ è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</h3>
<p class="section-description">ã”å¸Œæœ›ã®è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ãŠé¸ã³ãã ã•ã„ã€‚</p>

<label><input type="checkbox" class="option additional-option-item" name="additionalOption" value="5000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> èƒŒæ™¯ï¼ˆ5,000å††ï¼‰</label>
<label><input type="checkbox" class="option additional-option-item" name="additionalOption" value="15000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> ç´°ã‹ã„èƒŒæ™¯ï¼ˆ15,000å††ï¼‰</label>
<label><input type="checkbox" class="option additional-option-item" name="additionalOption" value="5000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> ç´°ã‹ã„è£…é£¾ï¼ˆ5,000å††ï¼‰</label>
<label><input type="checkbox" class="option additional-option-item" name="additionalOption" value="5000" data-img="https://raw.githubusercontent.com/5442mako/image-host-/main/fec976d1-b412-4286-b968-e8b672f86fd5.png"> å‹•ç‰©ãƒ»å¤§ãã‚ã‚¢ã‚¯ã‚»ï¼ˆ5,000å††ï¼‰</label>
<label><input type="checkbox" class="option additional-option-item" name="additionalOption" value="10000"> è¿½åŠ è¡£è£…ï¼ˆ1ç€ã”ã¨10,000å††ï¼‰</label>
<label><input type="checkbox" class="option additional-option-item" name="additionalOption" value="5000"> å•†ç”¨åˆ©ç”¨ï¼ˆ5,000å††ï¼‰</label>
<label><input type="checkbox" class="option" id="noOptionCheckbox" name="additionalOption" value="0"> è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—</label>


<div id="optionPreview" class="preview"></div>

<h3 id="contactInfoSectionH3">ğŸ“©ã”é€£çµ¡å…ˆ</h3>
<span style="color:#FF0000; font-size: 12px;">â€»ãŠåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆã§ã™ã€‚</span>

<input type="text" id="name" placeholder="ãŠåå‰">
<p id="nameErrorMessage" class="error-message" style="display: none;">â€»ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
<input type="email" id="email" placeholder="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹">
<p id="emailErrorMessage" class="error-message" style="display: none;">â€»æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>

<h3>ğŸ“ã”è¦æœ›</h3>
<textarea id="note" placeholder="ã”è¦æœ›ãŒã‚ã‚Œã°ã”è‡ªç”±ã«ã”è¨˜å…¥ãã ã•ã„ã€‚ä¾‹ï¼šé«ªè‰²ãƒ»æœè£…ãƒ»æ€§æ ¼ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ä½¿ç”¨ç›®çš„ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ãƒ»Live2Dãªã©ï¼‰ï¼ãƒãƒ¼ã‚ºã‚„æ§‹å›³ï¼èƒŒæ™¯ã®æœ‰ç„¡ ãªã©" rows="4"></textarea>
<span style="color:#636262; font-size: 12px;">â€»ä¾‹ï¼šé«ªè‰²ãƒ»æœè£…ãƒ»æ€§æ ¼ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ä½¿ç”¨ç›®çš„ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ãƒ»Live2Dãªã©ï¼‰ï¼ãƒãƒ¼ã‚ºã‚„æ§‹å›³ï¼èƒŒæ™¯ã®æœ‰ç„¡</span>

<h3>ğŸ“ å‚è€ƒç”»åƒï¼ˆæ·»ä»˜ï¼‰</h3>
<input type="file" id="imageFile" accept="image/*">

<p><button id="submitBtn" type="submit" style="width: 10em;">é€ä¿¡</button></p>

<div id="formErrorMessage" style="display: none; color: #fff; background-color: #e74c3c; padding: 10px 15px; border-radius: 6px; margin-bottom: 20px; font-size: 14px;"></div>

</form>

<hr color="#ff91d7">
<center><span style="color:#ff91d7; font-size: 12px;">*ãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»oã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚ãƒ»o*ã‚œãƒ»ã€‚</span></center>
<hr color="#ff91d7">

</div>
<div id="completeMessage" class="complete" style="display:none;">
<h2>é€ä¿¡ãŒå®Œäº†ã—ã¾ã—ãŸï¼</h2>
<p>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ãã ã•ã„ã€‚</p>
<p>ãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‰ã˜ã‚Œãªã„å ´åˆã¯ã€<br>ã‚¿ãƒ–ã‚’âŒã§é–‰ã˜ã‚‹ã‹ã€åˆ¥ã®ãƒšãƒ¼ã‚¸ã«ç§»å‹•ã—ã¦ãã ã•ã„ã€‚</p>
<button id="closeTabButton">ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã‚‹</button>
</div>

<div id="previewPanel">
Â  Â  <h4>é¸æŠå†…å®¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h4>
Â  Â  <p><strong>ã‚¤ãƒ©ã‚¹ãƒˆã‚¿ã‚¤ãƒ—:</strong> <span id="previewType">æœªé¸æŠ</span></p>
Â  Â  <p><strong>è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³:</strong> <span id="previewOptions">ãªã—</span></p>
Â  Â  <p><strong>ç°¡æ˜“è¦‹ç©åˆè¨ˆé‡‘é¡ï¼š</strong> <span id="previewTotal" class="preview-total-highlight">0</span></p>
</div>


<div class="popup-overlay" id="popupOverlay" onclick="hidePopup()">
<img id="popupImage" src="" alt="æ‹¡å¤§ç”»åƒ">
</div>

<script>

function showPopup(src) {
const overlay = document.getElementById("popupOverlay");
const popupImage = document.getElementById("popupImage");
popupImage.src = src;
overlay.style.display = "flex";
}

function hidePopup() {
document.getElementById("popupOverlay").style.display = "none";
}

const radios = document.querySelectorAll('input[name="type"]');
// const checkboxes = document.querySelectorAll('.option'); // ã“ã®è¡Œã¯ä¿®æ­£æ¡ˆã§ã¯ä¸è¦ã«ãªã‚‹ã‹ã€ä½¿ã„æ–¹ãŒå¤‰ã‚ã‚Šã¾ã™
const totalEl = document.getElementById('total');
const submitBtn = document.getElementById('submitBtn');
const optionPreviewContainer = document.getElementById('optionPreview'); // å¤‰æ•°åå¤‰æ›´
const typePreview = document.getElementById('typeImageBelowOptions');

// --- è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ’ä»–é¸æŠãƒ­ã‚¸ãƒƒã‚¯ã®ãŸã‚ã®è¦ç´ å–å¾— (ã“ã“ã‹ã‚‰) ---
const allOptionCheckboxes = document.querySelectorAll('.option'); // ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ã‚’å«ã‚€å…¨ã¦ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³
const noOptionCheckbox = document.getElementById('noOptionCheckbox');
// ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ã‚’é™¤ãã€å®Ÿéš›ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³é …ç›®ã‚’ç‰¹å®šã™ã‚‹ãŸã‚ã®æº–å‚™
// HTMLå´ã§ class="additional-option-item" ã‚’ä»˜ä¸ã—ã¦ã„ã‚‹å‰æ
const actualOptionItems = document.querySelectorAll('.additional-option-item');
// --- è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ’ä»–é¸æŠãƒ­ã‚¸ãƒƒã‚¯ã®ãŸã‚ã®è¦ç´ å–å¾— (ã“ã“ã¾ã§) ---


function calculateTotal() {
let total = 0;
const selectedType = document.querySelector('input[name="type"]:checked');
if (selectedType) total += parseInt(selectedType.value);

if (noOptionCheckbox && noOptionCheckbox.checked) {
Â  Â  // ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯åŠ ç®—ã—ãªã„
} else {
Â  Â  actualOptionItems.forEach(opt => { // ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ä»¥å¤–ã®é …ç›®ã‚’ãƒ«ãƒ¼ãƒ—
Â  Â  Â  Â  if (opt.checked) {
Â  Â  Â  Â  Â  Â  total += parseInt(opt.value);
Â  Â  Â  Â  }
Â  Â  });
}
totalEl.textContent = total.toLocaleString();
// updatePreviewPanel(); // ã“ã“ã§ã¯å‘¼ã°ãšã€å„ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®æœ€å¾Œã§å‘¼ã¶ã‚ˆã†ã«å¤‰æ›´ã‚‚æ¤œè¨
}

function updateTypePreview() {
const selected = document.querySelector('input[name="type"]:checked');
const existingImg = document.getElementById("typeImagePreview");
const existingNote = document.getElementById("typeImageNote");

if (existingImg) existingImg.remove();
if (existingNote) existingNote.remove();

if (selected && selected.dataset.img) {
const img = document.createElement("img");
img.src = selected.dataset.img;
img.alt = "ã‚¿ã‚¤ãƒ—ç”»åƒ";
img.id = "typeImagePreview";
img.style.maxWidth = "100%";
img.style.maxHeight = "200px";
img.style.marginTop = "10px";
img.style.borderRadius = "6px";
img.onclick = () => showPopup(img.src);

const note = document.createElement("p");
note.id = "typeImageNote";
note.textContent = "â€»ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§ã—ã¾ã™ã€‚";
note.style.color = "#d66";
note.style.fontSize = "0.9em";
note.style.marginTop = "5px";
note.style.marginBottom = "20px";

const lastTypeLabel = Array.from(radios).pop().closest("label");
if (lastTypeLabel) {
Â  Â  lastTypeLabel.insertAdjacentElement('afterend', img);
Â  Â  img.insertAdjacentElement('afterend', note);
}
}
}

function updateOptionPreview() {
Â  Â  optionPreviewContainer.innerHTML = '';
Â  Â  actualOptionItems.forEach(opt => { // ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ä»¥å¤–ã®é …ç›®ã‚’ãƒ«ãƒ¼ãƒ—
Â  Â  Â  Â  if (opt.checked && opt.dataset.img) {
Â  Â  Â  Â  Â  Â  const wrapper = document.createElement("div");
Â  Â  Â  Â  Â  Â  wrapper.className = "optionImageWrapper";
Â  Â  Â  Â  Â  Â  wrapper.style.marginRight = "10px";
Â  Â  Â  Â  Â  Â  wrapper.style.textAlign = "center";

Â  Â  Â  Â  Â  Â  const img = document.createElement("img");
Â  Â  Â  Â  Â  Â  img.src = opt.dataset.img;
Â  Â  Â  Â  Â  Â  img.alt = "ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç”»åƒ";
Â  Â  Â  Â  Â  Â  img.className = "optionImagePreview";
Â  Â  Â  Â  Â  Â  img.style.maxWidth = "150px";
Â  Â  Â  Â  Â  Â  img.style.maxHeight = "150px";
Â  Â  Â  Â  Â  Â  img.style.borderRadius = "6px";
Â  Â  Â  Â  Â  Â  img.style.cursor = "pointer";
Â  Â  Â  Â  Â  Â  img.onclick = () => showPopup(img.src);

Â  Â  Â  Â  Â  Â  const note = document.createElement("p");
Â  Â  Â  Â  Â  Â  note.className = "optionImageNote";
Â  Â  Â  Â  Â  Â  note.textContent = "â€»ç”»åƒã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨æ‹¡å¤§ã—ã¾ã™ã€‚";
Â  Â  Â  Â  Â  Â  note.style.color = "#d66";
Â  Â  Â  Â  Â  Â  note.style.fontSize = "0.8em";
Â  Â  Â  Â  Â  Â  note.style.marginTop = "5px";

Â  Â  Â  Â  Â  Â  wrapper.appendChild(img);
Â  Â  Â  Â  Â  Â  wrapper.appendChild(note);
Â  Â  Â  Â  Â  Â  optionPreviewContainer.appendChild(wrapper);
Â  Â  Â  Â  }
Â  Â  });
}


document.addEventListener('contextmenu', function(e) {
if (e.target.tagName === "IMG") {
e.preventDefault();
}
});

document.addEventListener('dragstart', function(e) {
if (e.target.tagName === "IMG") {
e.preventDefault();
}
});

function updatePreviewPanel() {
const selectedTypeRadio = document.querySelector('input[name="type"]:checked');
const previewTypeEl = document.getElementById("previewType");
const previewOptionsEl = document.getElementById("previewOptions");
const previewTotalEl = document.getElementById("previewTotal");

if (previewTypeEl) {
Â  Â  previewTypeEl.textContent = selectedTypeRadio ? selectedTypeRadio.parentElement.textContent.trim().replace(/ï¼ˆ[\d,]+å††ï¼‰$/, '') : "æœªé¸æŠ";
}

let optionsText = "ãªã—";
if (noOptionCheckbox && noOptionCheckbox.checked) {
Â  Â  optionsText = noOptionCheckbox.parentElement.textContent.trim().replace(/ï¼ˆ[\d,]+å††ï¼‰$/, '');
} else {
Â  Â  const checkedActualOptions = Array.from(actualOptionItems).filter(opt => opt.checked);
Â  Â  if (checkedActualOptions.length > 0) {
Â  Â  Â  Â  optionsText = checkedActualOptions.map(opt => opt.parentElement.textContent.trim().replace(/ï¼ˆ[\d,]+å††ï¼‰$/, '')).join(", ");
Â  Â  }
}
if (previewOptionsEl) {
Â  Â  previewOptionsEl.textContent = optionsText;
}

if (previewTotalEl) {
Â  Â  previewTotalEl.textContent = "Â¥" + totalEl.textContent;
}
}

<script>
// ãƒ‡ãƒ¼ã‚¿ã‚’GASã«é€ä¿¡ã™ã‚‹ãŸã‚ã®è£œåŠ©é–¢æ•°
async function sendDataToGAS(url, data) {
Â  Â  const submitBtn = document.getElementById('submitBtn');
Â  Â  try {
Â  Â  Â  Â  const response = await fetch(url, {
Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  // GAS Web Appã§ã¯CORSã‚¨ãƒ©ãƒ¼ã‚’å›é¿ã™ã‚‹ãŸã‚ã«text/plainã§é€ã‚Šã€GASå´ã§JSON.parseã™ã‚‹ã®ãŒä¸€èˆ¬çš„ã§ã™
Â  Â  Â  Â  Â  Â  headers: {
Â  Â  Â  Â  Â  Â  Â  Â  'Content-Type': 'text/plain;charset=utf-8',
Â  Â  Â  Â  Â  Â  },
Â  Â  Â  Â  Â  Â  body: JSON.stringify(data)
Â  Â  Â  Â  });

Â  Â  Â  Â  const result = await response.json();

Â  Â  Â  Â  if (result.status === 'success') {
Â  Â  Â  Â  Â  Â  // é€ä¿¡æˆåŠŸ
Â  Â  Â  Â  Â  Â  document.getElementById("formContainer").style.display = "none";
Â  Â  Â  Â  Â  Â  document.getElementById("previewPanel").style.display = "none";
Â  Â  Â  Â  Â  Â  document.getElementById("completeMessage").style.display = "block";
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // GASå´ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ããŸå ´åˆ
Â  Â  Â  Â  Â  Â  console.error('GAS Error:', result.message);
Â  Â  Â  Â  Â  Â  alert("é€ä¿¡å‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\nè©³ç´°: " + result.message);
Â  Â  Â  Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  Â  Â  Â  submitBtn.textContent = "é€ä¿¡";
Â  Â  Â  Â  }
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('Fetch Error:', error);
Â  Â  Â  Â  alert("é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šãªã©ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
Â  Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  Â  submitBtn.textContent = "é€ä¿¡";
Â  Â  }
}


// ãƒ¡ã‚¤ãƒ³ã®é€ä¿¡å‡¦ç†é–¢æ•°
async function handleSubmit(event) {
Â  Â  event.preventDefault();

Â  Â  // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç† (å…ƒã®ã‚³ãƒ¼ãƒ‰ã®ã¾ã¾)
Â  Â  const nameInput = document.getElementById("name");
Â  Â  const emailInput = document.getElementById("email");
Â  Â  const typeInputs = document.querySelectorAll('input[name="type"]');
Â  Â  const selectedType = document.querySelector('input[name="type"]:checked');

Â  Â  let hasError = false;
Â  Â  // ... (å…ƒã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ã«ãã®ã¾ã¾æ®‹ã—ã¦ãã ã•ã„) ...
Â  Â  // ä¾‹ï¼š
Â  Â  if (!nameInput.value.trim()) {
Â  Â  Â  Â  hasError = true;
        nameInput.classList.add("input-error");
        document.getElementById("nameErrorMessage").style.display = "block";
Â  Â  Â  Â  // ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã®å‡¦ç†
Â  Â  } else {
        nameInput.classList.remove("input-error");
        document.getElementById("nameErrorMessage").style.display = "none";
    }

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailInput.value.trim() || !emailRegex.test(emailInput.value.trim())) {
        hasError = true;
        emailInput.classList.add("input-error");
        document.getElementById("emailErrorMessage").style.display = "block";
    } else {
        emailInput.classList.remove("input-error");
        document.getElementById("emailErrorMessage").style.display = "none";
    }

    const typeErrorMessage = document.getElementById("typeErrorMessage");
    const illustrationTypeSectionH3 = document.getElementById("illustrationTypeSectionH3");
    if (!selectedType) {
        hasError = true;
        typeErrorMessage.style.display = "block";
        illustrationTypeSectionH3.classList.add("highlight-error"); // ã‚¨ãƒ©ãƒ¼æ™‚ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆ
    } else {
        typeErrorMessage.style.display = "none";
        illustrationTypeSectionH3.classList.remove("highlight-error"); // ã‚¨ãƒ©ãƒ¼è§£é™¤æ™‚ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’å‰Šé™¤
    }


Â  Â  if (hasError) {
Â  Â  Â  Â  alert("å…¥åŠ›ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚");
Â  Â  Â  Â  return; // ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°ã“ã“ã§å‡¦ç†ã‚’ä¸­æ–­
Â  Â  }


Â  Â  const submitBtn = document.getElementById('submitBtn');
Â  Â  submitBtn.disabled = true;
Â  Â  submitBtn.textContent = "é€ä¿¡ä¸­...";

Â  Â  // â˜…â˜…â˜…â˜…â˜… ã“ã“ã«ã‚ãªãŸã®URLã‚’è¨­å®šã—ã¾ã—ãŸ â˜…â˜…â˜…â˜…â˜…
Â  Â  const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbzPYH7PJvBY3-udurh-4vc4CmF0H2cGJI1KUaIFzgXksQaGzpyeE0rFp0ZquHSTQXAx/exec';

Â  Â  // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ã¾ã¨ã‚ã‚‹
Â  Â  const activeSelectedOptions = Array.from(allOptionCheckboxes).filter(opt => opt.checked);
Â  Â  const dataToSend = {
Â  Â  Â  Â  name: nameInput.value.trim(),
Â  Â  Â  Â  email: emailInput.value.trim(),
Â  Â  Â  Â  note: document.getElementById("note").value.trim(),
Â  Â  Â  Â  total: document.getElementById("total").textContent,
Â  Â  Â  Â  typeLabel: selectedType ? selectedType.parentElement.textContent.trim() : "",
Â  Â  Â  Â  optionLabels: activeSelectedOptions.map(opt => opt.parentElement.textContent.trim()),
Â  Â  Â  Â  image: null, Â  Â  // Base64ç”»åƒãƒ‡ãƒ¼ã‚¿
Â  Â  Â  Â  imageName: null, // å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«å
Â  Â  };

Â  Â  const file = document.getElementById("imageFile").files[0];
Â  Â Â 
Â  Â  // ãƒ•ã‚¡ã‚¤ãƒ«ãŒé¸æŠã•ã‚Œã¦ã„ã‚‹å ´åˆã®å‡¦ç†
Â  Â  if (file) {
Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  Â  reader.onload = async () => {
Â  Â  Â  Â  Â  Â  dataToSend.image = reader.result; // Base64ãƒ‡ãƒ¼ã‚¿
Â  Â  Â  Â  Â  Â  dataToSend.imageName = file.name;
Â  Â  Â  Â  Â  Â  // ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿å¾Œã«é€ä¿¡å®Ÿè¡Œ
Â  Â  Â  Â  Â  Â  await sendDataToGAS(GAS_WEB_APP_URL, dataToSend);
Â  Â  Â  Â  };
Â  Â  Â  Â  reader.onerror = (error) => {
Â  Â  Â  Â  Â  Â  console.error("ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼:", error);
Â  Â  Â  Â  Â  Â  alert("ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
Â  Â  Â  Â  Â  Â  submitBtn.disabled = false;
Â  Â  Â  Â  Â  Â  submitBtn.textContent = "é€ä¿¡";
Â  Â  Â  Â  };
Â  Â  } else {
Â  Â  Â  Â  // ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„å ´åˆã¯ãã®ã¾ã¾é€ä¿¡å®Ÿè¡Œ
Â  Â  Â  Â  await sendDataToGAS(GAS_WEB_APP_URL, dataToSend);
Â  Â  }
}


radios.forEach(r => r.addEventListener('change', () => {
Â  Â  calculateTotal();
Â  Â  updateTypePreview();
Â  Â  updatePreviewPanel(); // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³å¤‰æ›´æ™‚ã‚‚ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ«æ›´æ–°
}));

// --- è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ’ä»–é¸æŠãƒ­ã‚¸ãƒƒã‚¯ (ä¿®æ­£ç‰ˆ) ---
allOptionCheckboxes.forEach(checkbox => {
Â  Â  checkbox.addEventListener('change', function() {
Â  Â  Â  Â  if (this === noOptionCheckbox) { // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã®ãŒã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ã®å ´åˆ
Â  Â  Â  Â  Â  Â  if (this.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  // ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ãŒãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã€ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
Â  Â  Â  Â  Â  Â  Â  Â  actualOptionItems.forEach(opt => { // actualOptionItems ã‚’ä½¿ã†
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  opt.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } else { // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã®ãŒã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ä»¥å¤–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å ´åˆ
Â  Â  Â  Â  Â  Â  if (this.checked) {
Â  Â  Â  Â  Â  Â  Â  Â  // ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒãƒã‚§ãƒƒã‚¯ã•ã‚ŒãŸã‚‰ã€ã€Œè¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã—ã€ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™
Â  Â  Â  Â  Â  Â  Â  Â  if (noOptionCheckbox) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  noOptionCheckbox.checked = false;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  // çŠ¶æ…‹å¤‰æ›´å¾Œã«å…±é€šã®æ›´æ–°å‡¦ç†ã‚’å‘¼ã³å‡ºã™
Â  Â  Â  Â  calculateTotal();
Â  Â  Â  Â  updateOptionPreview();
Â  Â  Â  Â  updatePreviewPanel();
Â  Â  });
});
// --- è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ’ä»–é¸æŠãƒ­ã‚¸ãƒƒã‚¯ã“ã“ã¾ã§ ---


const previewPanel = document.getElementById('previewPanel');
const formElement = document.getElementById('estimateForm');
const submitBtnP = document.getElementById('submitBtn').parentElement;
const bodyElement = document.body;
const completeMessageElement = document.getElementById('completeMessage');
const closeTabButton = document.getElementById('closeTabButton');

let originalPreviewPanelParent = null;
let originalPreviewPanelNextSibling = null;

function movePreviewPanel() {
Â  Â  if (!previewPanel || !formElement || !submitBtnP || !completeMessageElement) {
Â  Â  Â  Â  return;
Â  Â  }

Â  Â  if (window.innerWidth <= 980) {
Â  Â  Â  Â  if (previewPanel.parentElement !== formElement) {
Â  Â  Â  Â  Â  Â  formElement.insertBefore(previewPanel, submitBtnP);
Â  Â  Â  Â  }
Â  Â  } else {
Â  Â  Â  Â  if (previewPanel.parentElement === formElement) {
Â  Â  Â  Â  Â  Â  if (originalPreviewPanelParent) {
Â  Â  Â  Â  Â  Â  Â  Â  Â originalPreviewPanelParent.insertBefore(previewPanel, originalPreviewPanelNextSibling);
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  bodyElement.insertBefore(previewPanel, completeMessageElement.nextSibling);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  }
}

document.addEventListener('DOMContentLoaded', () => {
Â  Â  if (previewPanel) {
Â  Â  Â  Â  originalPreviewPanelParent = previewPanel.parentElement;
Â  Â  Â  Â  originalPreviewPanelNextSibling = previewPanel.nextSibling;
Â  Â  }

Â  Â  calculateTotal(); // åˆæœŸè¨ˆç®—
Â  Â  updateTypePreview(); // åˆæœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
Â  Â  updateOptionPreview(); // åˆæœŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
Â  Â  updatePreviewPanel(); // åˆæœŸãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‘ãƒãƒ«
Â  Â  movePreviewPanel();

Â  Â  if(closeTabButton) {
Â  Â  Â  Â  closeTabButton.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const newWindow = window.open('', '_self', '');
Â  Â  Â  Â  Â  Â  if (newWindow) {
Â  Â  Â  Â  Â  Â  Â  Â  newWindow.close();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }
});

window.addEventListener('resize', movePreviewPanel);

</script>

</body>
</html>
